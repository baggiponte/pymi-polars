# 🐼 What are `pandas` limits?

Time for a little guessing game

<v-clicks>

"Nowadays, **my rule of thumb for pandas is that you should have 5 to 10 times as much RAM as the size of your dataset.**"

"But first, it’s worth considering not using pandas"

</v-clicks>

---

# 🐼 What are `pandas` limits?
A little rundown

<v-clicks>

* Single-threaded: cannot be natively parallelised (could be handy with `groupby` operations).
* Eager mode:
  * Must work with data in-memory (batching is not really an option: just [4 results](https://pandas.pydata.org/docs/search.html?q=batch) when scanning the docs).
  * Code is executed line by line and cannot be optimised by a query engine.
  * Lots of expensive copies are created.
* the `inplace` operator

  > Their is **no guarantee** that an inplace operation is actually faster. 
  > Often they are actually the same operation that works on a copy, but the top-level reference is reassigned.

  ❌ *just do(n't do) it*

</v-clicks>

---

# 🐼 What are `pandas` limits?
A little rundown

<v-clicks>

* Really expressive syntax, but can be complex/non-intuitive/not-pythonic/inefficient.
* This is especially true of the functional, modern syntax:
  * must resort to `lambdas`.

</v-clicks>

<v-click>

```python{5-7}
import pandas as pd

data = pd.read_csv("path/to/my/file.csv")

data.assign(
    new_col = lambda df: df["old_col"].apply(udf, *args, **kwargs)
)
```

</v-click>

---

# 🎋 Secret slide: modern `pandas`
A lesson from the `R` crowd

Would always recommend the [method chaining](https://tomaugspurger.github.io/posts/method-chaining/), and use the object oriented one within UDF.

* Elegant syntax with lots of nifty tricks
* Visually helpful in isolating pipelines


```python
import matplotlib.pyplot as plt
import seaborn as sns

plt.figure(figsize=(15, 5))

(
    df.filter(['fl_date', 'tail_num', 'dep_time', 'dep_delay'])
      .dropna()
      .assign(hour=lambda x: x.dep_time.dt.hour)
      .query('5 < dep_delay < 600')
      .pipe((sns.boxplot, 'data'), 'hour', 'dep_delay')
)

sns.despine()
```

